openapi: 3.0.3
info:
  title: Bank Asset API
  version: 1.0.0
paths:
  /bank/customers/{customerId}/assets:
    get:
      summary: Get bank assets for a customer
      parameters:
        - name: customerId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BankAssetResponse'
              examples:
                sample:
                  summary: Example bank asset payload
                  value:
                    customerId: "1234567890"
                    bankAssets:
                      - accountId: "ACC-1000-1734710400000"
                        assetName: "薪資帳戶"
                        balance: 235678.45
                        currency: TWD
                      - accountId: "ACC-1001-1734710400500"
                        assetName: "外幣帳戶"
                        balance: 1250.00
                        currency: USD
                    totalBalance: 236928.45
                    currency: TWD
                    traceId: "4b5a9b70-9b3f-4c4d-9d6d-6f9cfe5bbabc"
        '404':
          description: Customer not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                notFound:
                  value:
                    code: BANK_ASSET_NOT_FOUND
                    message: Customer assets not found
                    details:
                      customerId: "1234567890"
                    traceId: "b8c3d2ac-53e7-4501-a5be-2b5a7f897ed1"
        '502':
          description: Downstream unavailable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
              examples:
                downstreamFailure:
                  value:
                    code: ASSET_SOURCE_UNAVAILABLE
                    message: Downstream bank core service unavailable
                    details:
                      retryable: true
                    traceId: "9f2cbbf3-61a3-4f89-a11c-c0ce1d273084"
components:
  schemas:
    BankAssetResponse:
      type: object
      description: 銀行資產查詢的標準回應
      required: [customerId, bankAssets, totalBalance, currency, traceId]
      properties:
        customerId:
          type: string
          description: 銀行核心系統使用的客戶識別碼
          example: cust-001
        bankAssets:
          type: array
          description: 客戶名下所有銀行資產清單
          items:
            $ref: '#/components/schemas/BankAssetItem'
        totalBalance:
          type: number
          format: decimal
          description: 銀行資產依照 currency 加總後的總額
          example: 125000.5
        currency:
          type: string
          description: totalBalance 的幣別
          example: TWD
        traceId:
          type: string
          description: 供追蹤本次 API 呼叫的識別碼
          example: trace-7c8d
    BankAssetItem:
      type: object
      description: 單一銀行資產的欄位結構
      required: [accountId, assetName, balance, currency]
      properties:
        accountId:
          type: string
          description: Unique account identifier within the bank core
          example: ACC-1000-1734710400000
        assetName:
          type: string
          description: 資產/帳戶顯示名稱
          example: 薪資帳戶
        balance:
          type: number
          format: decimal
          description: 帳戶目前餘額
          example: 235678.45
        currency:
          type: string
          description: 帳戶餘額的幣別
          example: TWD
    ErrorResponse:
      type: object
      required: [code, message, traceId]
      properties:
        code:
          type: string
        message:
          type: string
        details:
          type: object
          additionalProperties: true
        traceId:
          type: string
